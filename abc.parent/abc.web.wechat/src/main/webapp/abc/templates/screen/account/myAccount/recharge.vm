<!--首页头部-->
<nav id="nav" class="nav">
	<a class="navbar-brand nabar_color"  href="/account/myAccount/treasure"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span></a>
	<div class="clearfix index_suo text-center"><span>充值</span><a h class="pull-right mr5" href="/account/myAccount/chongzhijilu">充值记录</a> </div>
</nav>
<!--首页头部 end-->
<div class="container bd_top" style="overflow-x:hidden">
	<form action="/account/myAccount/rechargeMoney" method="post" id="rechargeForm" name="rechargeForm">
	    <div class="row mt10 bg_white baifen2">
	        <div class="col-sm-12 col-xs-12">
	            <ul class="list-unstyled" id="chongzhi">
	                <li class="clearfix bd mt10"><i class="glyphicon glyphicon-piggy-bank cion_bioao pull-left ml5"></i><input class="pull-left" type="text" placeholder="请输入充值金额" id="money" name="money"><span class="pull-right mr5">元</span></li>
	            </ul>
	            <p class="bd_save mt25"><a href="javascript:;" onclick="checkMoney()">下一步</a></p>
	            <div class="note pt10 pb20">
	                <h4 class="color_yellow">温馨提示</h4>
	                <p class="color_gray">
	                   1.个人网银支持银行：工商银行、农业银行、中国银行、建设银行、交通银行、民生银行、招商银行、光大银行、兴业银行、浦东发展银行、中国邮政储蓄银行、上海银行
	                </p>
	                <p class="color_gray">
	                   2.快捷充值支持银行：农业银行、上海银行、建设银行、中国银行、光大银行、兴业银行、中信银行、平安银行、浦东发展银行、渤海银行、中国邮政储蓄银行
	                </p>
	            </div>
	        </div>
	    </div>
	</form>	    
</div>
<script type="text/javascript">
	//校验
	function checkMoney(){
		//企业开户失败，不允许充值
		var openState = '${user.userBusinessState}';
		if(openState=='7'){
			layer.alert("开户申请被拒绝，无法充值！");
			return false;
		}
		var money = $("#money").val();
		var reg = /^(([0-9]|([1-9][0-9]{0,8}))((\.[0-9]{1,2})?))$/;
		// 验证非零的正整数：
		var posInt = /^\+?[1-9][0-9]*$/;
		if(money==null || money==""){
			layer.alert("充值金额不能为空！");
	    	return false;
		}else if(!posInt.test(money)){
			layer.alert("充值金额必须为整数！");
	    	return false;
		}else if(parseFloat(money)<20){
			layer.alert("充值金额必须大于等于20！");
	    	return false;
		}else if(!reg.test(money)){
			layer.alert("充值金额不能过大！");
	    	return false;
		}
		Subapp();
		
	}
	
	//充值跳转
	function Subapp(id){		
		$.ajax({
			type:"POST",
			async:false,
		    dataType:'json',
		    data:{"id":id},
		    url:"/Verification/json/CheckMoneyMoreMore.json",
		    success:function(data){
		    	if(data.success){
					document.rechargeForm.submit()
		    	}else{
		    		layer.alert(data.message,2,function(){
		    			window.location.href=data.redirectUrl;
		    		});
		    	}
		    }
		});
	}
</script>

 